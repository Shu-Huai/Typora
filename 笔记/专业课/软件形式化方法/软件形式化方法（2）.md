# 软件形式化方法（2）

## 关系和函数

### 关系

**若干个集合的元素之间的关系**

#### 关系表示法

只讨论**二元关系**

关系是一个序偶的集合

如果 $X$ 和 $Y$ 是集合，那么它们的笛卡儿积 $X\times Y$ 也是一个集合。

$X$ 和 $Y$ 的一个关系 $R$ 是笛卡儿积 $X\times Y$ 的子集，也就是说，$R\subseteq X\times Y$

$X$ 到 $Y$ 的所有关系的类型被写成 $X\leftrightarrow Y$，也就是 $\mathbb P(X\times Y)$

**定义**：$X\leftrightarrow Y==\mathbb P(X\times Y)$

$(x,y)$ 可以写成 $x\mapsto y$，读作 $x$ 映射到 $y$

如果一个关系所关联的两个元素取自千同一集合 $X$，则说这是集合 $X$ 上的关系

#### 定义域和值域

源集和目标集

关系的定义域是关系源集的一个子集，该子集中的任一元素至少与目标集中的一个元素有给定的关系。

关系的值域是关系目标集的一个子集，对于该子集中的任一元素，在源集中都有元素与其有给定的关系。

如果 $R$ 是一个类型为 $X\leftrightarrow Y$ 的关系，通常可以 $\text{dom} R$ 来表示 $R$ 的定义域，以 $\text{ran} R$ 来表示 $R$ 的值域。

**性质**：

1. $x\in\operatorname{dom}R\Leftrightarrow(\exists y: Y \cdot x R y)$
2. $y\in \text{ran} R \Leftrightarrow (\exists x: X \cdot x R y)$
3. $\text{dom}\lbrace x_{1}\mapsto y_{1},\cdots, x_{n}\mapsto y_{n}\rbrace=\lbrace x_{1},\cdots, x_{n}\rbrace$
4. $\operatorname{ran}\lbrace x_{1}\mapsto y_{1},\cdots, x_{n}\mapsto y_{n}\rbrace=\lbrace y_{1},\cdots, y_{n}\rbrace$
5. $\operatorname{dom}(Q\cup R)=(\operatorname{dom} Q)\cup(\operatorname{dom} R)$
6. $\operatorname{ran}(Q\cup R)=(\operatorname{ran} Q)\cup(\operatorname{ran} R)$
7. $\operatorname{dom}(Q\cap R)\subseteq (\operatorname{dom} Q)\cap(\operatorname{dom} R)\operatorname{ran}(Q\cap R)\subseteq(\operatorname{ran} Q)\cap(\operatorname{ran} R)$
8. $\text{dom}\varnothing=\varnothing$
9. $\operatorname{ran}\varnothing=\varnothing$

### 关系的运算

关系本身就是序偶的集合，所以对于集合的运算都可应用于关系。

#### 关系复合

给定两个关系，如果第一个关系的值域类型与第二个关系的定义域类型相同，则可由这两个关系通过关系复合得到一个新的关系。新关系的定义域与第一个关系的定义域相同，其值域的类型与第二个关系的值域类型相同。

**类似复合函数**