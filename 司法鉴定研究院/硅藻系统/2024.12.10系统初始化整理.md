# 2024.12.10 系统初始化整理

## 目前获得的东西

1. 甲方提供的对于算法处理的代码
2. 甲方提供的数据
3. 万修安提供的系统 demo 前后端代码（使用 Vue3 和 Django 搭建）
4. 一些 Django 方面的教程

## 甲方需求

1. 根据算法处理逻辑，包括去噪、切图、截图等处理流程，构建出完整的前后端系统
2. 我们现在已有的 demo，认为和之前的系统有纠纷，需要修改页面逻辑和 UI
3. 春节后交付

## 目前发现系统开发层面存在的问题

1. 使用 Django 构建（**技术栈不匹配**）

2. demo 系统中，数据库表的内容不完善，缺少很多信息（用户表、检验人、检材等），现在都是用的**静态数据**，需要完善逻辑

3. 对于用户、检材等的**增删改查**逻辑需要补充

4. demo 系统中，对图片的关键操作都是用的`等待随机时间后直接返回`，需**完善算法**

5. 目前流程没有跑通，在 demo 页面中进行人工确认时**报错**

    <img src="http://public.file.lvshuhuai.cn/images\image-20241210142921964.png" alt="image-20241210142921964" style="zoom:50%;" />

    <img src="http://public.file.lvshuhuai.cn/images\image-20241210142941793.png" alt="image-20241210142941793" style="zoom:50%;" />

5. **出错处理**
6. 添加逻辑 `s_create_coordinates`、`s_screen_image_bulk`
7. 是否重写？

1、后续工作存在的问题评估：
（1）	关于张老师写的代码：每个py文件是割裂开的，都是先将文件放在本地，然后每个py文件都是读取本地的一些文件，再生成一些文件放在本地，然后执行下一个功能所对应的py文件时再读取本地的一些文件，然后再生成一些文件放在本地。
（2）	关于张老师原来的硅藻系统：并不是一个web网站，而是一个装在本地的软件，没有所谓的数据库，所有的中间文件都保存在本地，因此执行每个功能时只要读取保存在本地的对应文件，就可以配合张老师自己写的代码一步步执行下去
（3）	关于小万原来的硅藻系统：是web网站，数据也是放在数据库里，并没有将中间文件保存在本地再读出来的过程，而是返回一个对象，再通过传入内存中的这个对象来执行下一个功能，因此如果想要将张老师的代码用到小万的硅藻系统中，有两个可能的方案：
①	对张老师的代码进行大改，在保留原有代码逻辑的同时改成符合小万的硅藻系统的样子，这个大改过程的工作量比较大，需要将张老师代码中的细节也完全看懂的基础上才能修改。
②	自己重写代码，这样硅藻检测的部分虽然可以快速上手，但对svs切片的处理与分割需要使用一个openslide的库，这个是专门处理svs的一个库，svs和普通图像不一样，需要花很多时间去学习库的用法，可能还是需要回到张老师的代码去学习，这个过程也需要很多工作量。
（4）	根据张老师的要求，前端界面也得大改，还得加一个模型评估的功能，但关键问题是与切片相关的功能比较麻烦